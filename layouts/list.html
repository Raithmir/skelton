{{ define "main" }}
<div id="calendar"></div>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      events: '/events/calendar.json',
      eventClick: function(info) {
        window.location.href = info.event.url;
      }
    });
    calendar.render();
  });
</script>

<h2>Upcoming Events</h2>
<div class="events-list">
  {{ range where .Pages "Params.draft" "!=" true }}
    {{ if ge (.Params.eventDate | time) now }}
    <article>
      <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
      <time>{{ .Params.eventDate | dateFormat "Monday, Jan 2, 2006" }} at {{ .Params.eventTime }}</time>
      <p>{{ .Params.location }}</p>
      {{ .Summary }}
    </article>
    {{ end }}
  {{ end }}
</div>
{{ end }}
